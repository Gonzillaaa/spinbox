# Multi-stage DevContainer for test-multi-version-4572
# Generated by Spinbox on Mon Jul 14 23:58:46 CEST 2025

FROM node:19-alpine as node-base
FROM python:3.10-slim

# Copy Node.js from node image
COPY --from=node-base /usr/local/bin/node /usr/local/bin/
COPY --from=node-base /usr/local/lib/node_modules /usr/local/lib/node_modules
RUN ln -s /usr/local/lib/node_modules/npm/bin/npm-cli.js /usr/local/bin/npm

# Install Python and Node.js development tools
RUN apt-get update && apt-get install -y \
    build-essential \
    && rm -rf /var/lib/apt/lists/*

# Install UV for Python package management
RUN pip install uv

# Install Zsh and Powerlevel10k
RUN apt-get update && apt-get install -y \
    zsh \
    git \
    curl \
    && rm -rf /var/lib/apt/lists/*

# Install Oh My Zsh and Powerlevel10k
RUN sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" && \
    git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k

# Set up Zsh as default shell
RUN chsh -s /bin/zsh
ENV SHELL=/bin/zsh

# Create workspace directory
WORKDIR /workspace

# Copy setup script
COPY setup.sh /setup.sh
RUN chmod +x /setup.sh
